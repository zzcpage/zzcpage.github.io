---
title: Web项目部署
categories: 
    - JavaWeb
tags:
    - JavaWeb
---

1. 安装Tomcat
   
>1. 通过 tar -zxvf 解压tomcat。
>2. 修改catalina.sh，在脚本开头增加export JAVA_HOME指定jdk路径。

修改Tomcat的端口：
将8080，8005，8009修改其它端口即可。
 <Connector port="8080"
               maxThreads="150" minSpareThreads="25" maxSpareThreads="75"
               enableLookups="false" redirectPort="8443" acceptCount="100"
               connectionTimeout="20000" disableUploadTimeout="true" />

<Server port="8005" shutdown="SHUTDOWN">

<Connector port="8009" protocol="AJP/1.3" redirectPort="8443"/>



1. 下载jdk

下载jdk，然后通过tar -zxvf 进行解压jdk

3. 打包项目

将项目打包war包，然后放入到tomcat的webapp目录下即可。

>4. 访问路径

将War包包放到webapp下之后，访问路径的名称就是war包的名称，假设war包为AAA.war,部署端口为8080.
ip地址为xxx.xxx.xxx则访问路径为：https://xxx.xxx.xxx/AAA。


>5. 报错解决

### Cannot find /usr/tomcat/tomcat9/bin/setclasspath.sh

执行：unset CATALINA_HOME



#### 部署多个war包

Tomcat部署多个war包，可以通过修改server.xml配置文件。设置多个Service,然后指定port和appBase，然后将war包放到对应的appBase中即可。
```python
 <Service name="Catalina">
    <Connector port="8080" protocol="HTTP/1.1"
               connectionTimeout="20000"
               redirectPort="8443" />
    <Engine name="Catalina" defaultHost="localhost">

      <Realm className="org.apache.catalina.realm.LockOutRealm">
         
        <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
               resourceName="UserDatabase"/>
      </Realm>
      <Host name="localhost"  appBase="webapps"
            unpackWARs="true" autoDeploy="true">
        <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"
               prefix="localhost_access_log" suffix=".txt"
               pattern="%h %l %u %t &quot;%r&quot; %s %b" />
	<Server port="8006" shutdown="SHUTDOWN"/>
      </Host>
    </Engine>
  </Service>


 <Service name="Catalina">
    <Connector port="7766" protocol="HTTP/1.1"
               connectionTimeout="20000"
               redirectPort="8443" /> 
    <Engine name="Catalina" defaultHost="localhost">

      <Realm className="org.apache.catalina.realm.LockOutRealm">
         
        <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
               resourceName="UserDatabase"/>
      </Realm>
      <Host name="localhost"  appBase="webapps1"
            unpackWARs="true" autoDeploy="true">
        <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"
               prefix="localhost_access_log" suffix=".txt"
               pattern="%h %l %u %t &quot;%r&quot; %s %b" />
	<Server port="8006" shutdown="SHUTDOWN"/>
      </Host>
    </Engine>
  </Service>

```